generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "sqlite"
  url      = ""
}

model Post {
  id                 String   @id @default(uuid())
  categoryId         String
  title              String
  company            String
  user_id            String?
  status_id          Int      @map("status")
  status_hint        Int?
  description        String
  tags               Tag[]
  app_url            String?
  community_url      String?
  banner_url         String?
  icon_url           String?
  created_at         DateTime @default(now())
  updated_at         DateTime @default(now())
  update_description String?
  category           Category @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  status             Status   @relation(fields: [status_id], references: [id])
  upvotes            Upvote[]

  @@index([categoryId])
  @@index([status_id])
  @@index([user_id])
  @@index([created_at])
}

model Tag {
  id    String @id @default(uuid())
  index Int    @default(0) @map("idx")
  name  String @unique
  posts Post[]

  @@index([name])
}

model Upvote {
  id      Int     @id @default(autoincrement())
  user_id String?
  post_id String?
  Post    Post?   @relation(fields: [post_id], references: [id])

  @@index([user_id])
  @@index([post_id])
}

model Status {
  id    Int    @id @default(autoincrement())
  index Int    @default(0) @map("idx")
  name  String @unique
  color String
  text  String
  icon  String
  posts Post[]

  @@index([name])
}

model Category {
  id    String @id @default(uuid())
  index Int    @default(0) @map("idx")
  name  String @unique
  icon  String
  posts Post[]

  @@index([name])
}
